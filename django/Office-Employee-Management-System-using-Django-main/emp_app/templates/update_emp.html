<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edit Employee Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <style>
      .OEMS {
        text-decoration: underline;
        text-underline-offset: 0.8rem;
        text-decoration-thickness: 0.15rem;
      }
      .form-container {
        max-width: 600px;
        margin: auto;
        font-weight: 600;
      }
    </style>
  </head>
  <body>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show my-2" role="alert">
          <strong>{{ message }}</strong>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    <h1 class="text-center my-4 OEMS">Edit Employee</h1>

    <!-- Display any custom message from context -->
    {% if message %}
      <div class="alert alert-info text-center">
        <strong>{{ message }}</strong>
      </div>
    {% endif %}

    <div class="form-container">
      <form method="POST" action="{% url 'update_emp' %}">
        {% csrf_token %}
        
        <!-- Select Employee dropdown -->
        <div class="mb-3">
          <label for="selected_employee" class="form-label">Select Employee:</label>
          <select name="selected_employee" id="selected_employee" class="form-select" required>
            <option value="">-- Select Employee --</option>
            {% for emp in employees %}
              <option value="{{ emp.emp_id }}">{{ emp.first_name }} {{ emp.last_name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- First Name input -->
        <div class="mb-3">
          <label for="first_name" class="form-label">First Name:</label>
          <input type="text" class="form-control" name="first_name" id="first_name" required placeholder="Enter First Name">
        </div>

        <!-- Last Name input -->
        <div class="mb-3">
          <label for="last_name" class="form-label">Last Name:</label>
          <input type="text" class="form-control" name="last_name" id="last_name" required placeholder="Enter Last Name">
        </div>

        <!-- Department dropdown -->
        <div class="mb-3">
          <label for="department" class="form-label">Department:</label>
          <select name="department" id="department" class="form-select" required>
            <option value="">-- Select Department --</option>
            {% for d in dept %}
              <option value="{{ d.id }}">{{ d.name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Role dropdown -->
        <div class="mb-3">
          <label for="role" class="form-label">Role:</label>
          <select name="role" id="role" class="form-select" required>
            <option value="">-- Select Role --</option>
            {% for r in role %}
              <option value="{{ r.id }}">{{ r.name }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Salary input -->
        <div class="mb-3">
          <label for="salary" class="form-label">Salary:</label>
          <input type="number" class="form-control" name="salary" id="salary" required placeholder="Enter Salary">
        </div>

        <!-- Bonus input -->
        <div class="mb-3">
          <label for="bonus" class="form-label">Bonus:</label>
          <input type="number" class="form-control" name="bonus" id="bonus" required placeholder="Enter Bonus">
        </div>

        <!-- Phone Number input -->
        <div class="mb-3">
          <label for="phone_number" class="form-label">Phone Number:</label>
          <input type="text" class="form-control" name="phone_number" id="phone_number" required placeholder="Enter Phone Number">
        </div>

        <!-- Hire Date input -->
        <div class="mb-3">
          <label for="hire_date" class="form-label">Hire Date:</label>
          <input type="date" class="form-control" name="hire_date" id="hire_date" required>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-success">Update Employee</button>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
